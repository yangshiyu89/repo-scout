---
name: repo-scout
description: å¿«é€Ÿè°ƒç ”/éƒ¨ç½²å¼€æº AI æ¨¡å‹ä»“åº“å¹¶è¿è¡Œæ¨ç† demoã€‚æ”¯æŒå¹¶è¡Œä»»åŠ¡æ‰§è¡Œã€åå°è¿è¡Œå’Œè¿›åº¦ç›‘æ§ã€‚å½“ä½ æƒ³è¦å¿«é€Ÿä¸Šæ‰‹ä¸€ä¸ª AI æ¨¡å‹ repoã€è°ƒç ”æŸä¸ªå¼€æºæ¨¡å‹å¦‚ä½•ä½¿ç”¨ã€éƒ¨ç½²å’Œè¿è¡Œæ¨¡å‹ demo æ—¶ä½¿ç”¨æ­¤ skillã€‚
---

# Repo Scout - AI æ¨¡å‹å¿«é€Ÿè°ƒç ”å·¥å…·ï¼ˆå¢å¼ºç‰ˆï¼‰

å¸®åŠ©ä½ å¿«é€Ÿè°ƒç ”å’Œéƒ¨ç½²å¼€æº AI æ¨¡å‹ä»“åº“ï¼Œæ”¯æŒ**å¹¶è¡Œæ‰§è¡Œ**ã€**åå°è¿è¡Œ**å’Œ**è¿›åº¦ç›‘æ§**ã€‚

## ğŸ†• å¢å¼ºç‰¹æ€§

- âš¡ **å¹¶è¡Œæ‰§è¡Œ** - ç¯å¢ƒæ­å»ºå’Œæ¨¡å‹ä¸‹è½½å¯åŒæ—¶è¿›è¡Œ
- ğŸ–¥ï¸ **tmux åå°è¿è¡Œ** - é•¿æ—¶é—´ä»»åŠ¡åœ¨åå°è¿è¡Œï¼Œä¸æ€•ä¸­æ–­
- ğŸ“Š **å®æ—¶è¿›åº¦ç›‘æ§** - éšæ—¶æŸ¥çœ‹ä»»åŠ¡çŠ¶æ€å’Œè¿›åº¦
- ğŸ›¡ï¸ **å®‰å…¨é€€å‡ºæœºåˆ¶** - ä¸»ç¨‹åºé€€å‡ºæ—¶å®‰å…¨åœæ­¢æ‰€æœ‰åå°ä»»åŠ¡
- ğŸ“‹ **ä»»åŠ¡ç®¡ç†** - è¿½è¸ªå’Œç®¡ç†æ‰€æœ‰åå°ä»»åŠ¡

## ä½¿ç”¨åœºæ™¯

å½“ç”¨æˆ·è¯´ï¼š
- "å¸®æˆ‘è°ƒç ”ä¸€ä¸‹è¿™ä¸ªæ¨¡å‹ repoï¼šxxx"
- "æˆ‘æƒ³å¿«é€Ÿä¸Šæ‰‹ xxx æ¨¡å‹"
- "å¸®æˆ‘éƒ¨ç½² xxx æ¨¡å‹å¹¶è·‘ä¸ª demo"
- "è¿™ä¸ªå¼€æºé¡¹ç›®æ€ä¹ˆè·‘ï¼Ÿ"

## ğŸ”§ æ ¸å¿ƒå·¥ä½œåŸç†

### Skill çš„æœ¬è´¨

è¿™ä¸ª skill æ˜¯ä¸€ä¸ª**ç»“æ„åŒ–çš„æŒ‡å¯¼æ–‡æ¡£**ï¼Œä¸º AI Agent æä¾›æ“ä½œæŒ‡å—ã€‚å®é™…æ‰§è¡Œç”± AI Agent å®Œæˆï¼ŒAgent å¯ä»¥ï¼š
- æ ¹æ®æƒ…å†µåˆ¤æ–­æ˜¯å¦å¹¶è¡Œæ‰§è¡Œ
- ä½¿ç”¨ tmux ç®¡ç†é•¿æ—¶é—´ä»»åŠ¡
- ç›‘æ§ä»»åŠ¡è¿›åº¦
- å®‰å…¨åœ°ç®¡ç†åå°è¿›ç¨‹

### æ‰§è¡Œæ¨¡å¼

```
ä¼ ç»Ÿæ¨¡å¼ï¼ˆä¸²è¡Œï¼‰ï¼š
ç¯å¢ƒæ­å»º â†’ æ¨¡å‹ä¸‹è½½ â†’ æ•°æ®å‡†å¤‡ â†’ æ¨ç†æ‰§è¡Œ

å¢å¼ºæ¨¡å¼ï¼ˆå¹¶è¡Œï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¯å¢ƒæ­å»º   â”‚â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                  â”œâ”€â”€â†’ æ•°æ®å‡†å¤‡ â†’ æ¨ç†æ‰§è¡Œ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  æ¨¡å‹ä¸‹è½½   â”‚â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ å®Œæ•´å·¥ä½œæµç¨‹

### ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–å’Œä»»åŠ¡è§„åˆ’

1. **è¯¢é—®ç”¨æˆ·ä¿¡æ¯**ï¼š
   - GitHub ä»“åº“åœ°å€
   - clone ç›®æ ‡ç›®å½•
   - æ¨¡å‹æ˜¯å¦å·²ä¸‹è½½

2. **åˆ›å»ºä»»åŠ¡ç®¡ç†ç»“æ„**ï¼š
   ```bash
   # åˆ›å»ºä»»åŠ¡ç›®å½•
   mkdir -p <repo_directory>/.task_manager
   mkdir -p <repo_directory>/.task_manager/logs
   mkdir -p <repo_directory>/.task_manager/pids
   
   # åˆå§‹åŒ–ä»»åŠ¡çŠ¶æ€æ–‡ä»¶
   cat > <repo_directory>/.task_manager/tasks.json << 'EOF'
   {
     "repo_name": "<repo_name>",
     "start_time": "<timestamp>",
     "tasks": {
       "environment": {"status": "pending", "pid": null},
       "model_download": {"status": "pending", "pid": null},
       "data_prep": {"status": "pending", "pid": null},
       "inference": {"status": "pending", "pid": null}
     }
   }
   EOF
   ```

3. **è®¾ç½® tmux session**ï¼š
   ```bash
   # æ£€æŸ¥ tmux æ˜¯å¦å®‰è£…
   if ! command -v tmux &> /dev/null; then
       echo "å®‰è£… tmux..."
       apt-get install -y tmux || brew install tmux
   fi
   
   # åˆ›å»ºä¸“ç”¨çš„ tmux session
   SESSION_NAME="repo-scout-$(date +%Y%m%d_%H%M%S)"
   tmux new-session -d -s $SESSION_NAME -c <repo_directory>
   
   # è®°å½• session åç§°
   echo $SESSION_NAME > <repo_directory>/.task_manager/tmux_session
   ```

### ç¬¬äºŒæ­¥ï¼šå¹¶è¡Œä»»åŠ¡æ‰§è¡Œ

#### 2.1 ç¯å¢ƒæ­å»ºï¼ˆtmux window 0ï¼‰

**é‡è¦ï¼šä¸¥ç¦ä½¿ç”¨ condaï¼Œå¿…é¡»ä½¿ç”¨ uv**

```bash
# åœ¨ tmux window ä¸­å¯åŠ¨ç¯å¢ƒæ­å»º
tmux new-window -t $SESSION_NAME -n "environment"

# å‘é€å‘½ä»¤åˆ° tmux
tmux send-keys -t $SESSION_NAME:environment "cd <repo_directory>" Enter
tmux send-keys -t $SESSION_NAME:environment "exec > >(tee -a .task_manager/logs/environment.log) 2>&1" Enter

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
tmux send-keys -t $SESSION_NAME:environment "uv venv .venv" Enter
tmux send-keys -t $SESSION_NAME:environment "source .venv/bin/activate" Enter

# å®‰è£…ä¾èµ–ï¼ˆæ ¹æ®é¡¹ç›®ç±»å‹ï¼‰
if [ -f "requirements.txt" ]; then
    tmux send-keys -t $SESSION_NAME:environment "uv pip install -r requirements.txt" Enter
elif [ -f "setup.py" ] || [ -f "pyproject.toml" ]; then
    tmux send-keys -t $SESSION_NAME:environment "uv pip install -e ." Enter
fi

# è®°å½•å®ŒæˆçŠ¶æ€
tmux send-keys -t $SESSION_NAME:environment "echo 'ENVIRONMENT_SETUP_COMPLETE' >> .task_manager/status" Enter

# è®°å½• PIDï¼ˆç”¨äºåç»­ç®¡ç†ï¼‰
tmux send-keys -t $SESSION_NAME:environment "echo \$! > .task_manager/pids/environment.pid" Enter
```

#### 2.2 æ¨¡å‹/æ•°æ®ä¸‹è½½ï¼ˆtmux window 1ï¼‰

**åŒæ—¶å¹¶è¡Œå¯åŠ¨**

```bash
# åˆ›å»ºæ–°çš„ tmux window ç”¨äºæ¨¡å‹ä¸‹è½½
tmux new-window -t $SESSION_NAME -n "model_download"

tmux send-keys -t $SESSION_NAME:model_download "cd <repo_directory>" Enter
tmux send-keys -t $SESSION_NAME:model_download "exec > >(tee -a .task_manager/logs/model_download.log) 2>&1" Enter

# æ£€æŸ¥å¹¶å®‰è£… aria2c
tmux send-keys -t $SESSION_NAME:model_download "which aria2c || apt-get install -y aria2" Enter

# éƒ¨ç½² hfd.sh è„šæœ¬
tmux send-keys -t $SESSION_NAME:model_download "mkdir -p ~/.local/bin" Enter
tmux send-keys -t $SESSION_NAME:model_download "cp <skill_path>/scripts/hfd.sh ~/.local/bin/hfd.sh" Enter
tmux send-keys -t $SESSION_NAME:model_download "chmod +x ~/.local/bin/hfd.sh" Enter

# æ ¹æ®ç”¨æˆ·é€‰æ‹©ä¸‹è½½æ¨¡å‹
# é€‰é¡¹ 1: ModelScope
tmux send-keys -t $SESSION_NAME:model_download "pip install modelscope" Enter
tmux send-keys -t $SESSION_NAME:model_download "python -c \"from modelscope import snapshot_download; snapshot_download('<model_name>')\"" Enter

# é€‰é¡¹ 2: HuggingFaceï¼ˆä½¿ç”¨ hfd.shï¼‰
tmux send-keys -t $SESSION_NAME:model_download "~/.local/bin/hfd.sh <org/model-name> --tool aria2c -x 10" Enter

# è®°å½•å®ŒæˆçŠ¶æ€
tmux send-keys -t $SESSION_NAME:model_download "echo 'MODEL_DOWNLOAD_COMPLETE' >> .task_manager/status" Enter
tmux send-keys -t $SESSION_NAME:model_download "echo \$! > .task_manager/pids/model_download.pid" Enter
```

### ç¬¬ä¸‰æ­¥ï¼šä»»åŠ¡ç›‘æ§

åˆ›å»ºç›‘æ§è„šæœ¬ï¼š

```bash
# åˆ›å»ºç›‘æ§è„šæœ¬
cat > <repo_directory>/.task_manager/monitor.sh << 'MONITOR_EOF'
#!/bin/bash

TASK_DIR="<repo_directory>/.task_manager"
LOG_DIR="$TASK_DIR/logs"

echo "========================================="
echo "Repo Scout ä»»åŠ¡ç›‘æ§"
echo "========================================="
echo "Session: $(cat $TASK_DIR/tmux_session 2>/dev/null || echo 'N/A')"
echo "å¼€å§‹æ—¶é—´: $(cat $TASK_DIR/start_time 2>/dev/null || echo 'N/A')"
echo ""

# æ£€æŸ¥ç¯å¢ƒæ­å»ºçŠ¶æ€
if grep -q "ENVIRONMENT_SETUP_COMPLETE" "$TASK_DIR/status" 2>/dev/null; then
    echo "âœ… ç¯å¢ƒæ­å»º: å®Œæˆ"
else
    echo "â³ ç¯å¢ƒæ­å»º: è¿›è¡Œä¸­..."
    echo "   æœ€æ–°æ—¥å¿—:"
    tail -n 5 "$LOG_DIR/environment.log" 2>/dev/null | sed 's/^/   /'
fi

echo ""

# æ£€æŸ¥æ¨¡å‹ä¸‹è½½çŠ¶æ€
if grep -q "MODEL_DOWNLOAD_COMPLETE" "$TASK_DIR/status" 2>/dev/null; then
    echo "âœ… æ¨¡å‹ä¸‹è½½: å®Œæˆ"
else
    echo "â³ æ¨¡å‹ä¸‹è½½: è¿›è¡Œä¸­..."
    echo "   æœ€æ–°æ—¥å¿—:"
    tail -n 5 "$LOG_DIR/model_download.log" 2>/dev/null | sed 's/^/   /'
fi

echo ""
echo "========================================="
echo "ç›‘æ§å‘½ä»¤:"
echo "  æŸ¥çœ‹ç¯å¢ƒæ—¥å¿—: tail -f $LOG_DIR/environment.log"
echo "  æŸ¥çœ‹ä¸‹è½½æ—¥å¿—: tail -f $LOG_DIR/model_download.log"
echo "  è¿›å…¥ tmux: tmux attach -t \$(cat $TASK_DIR/tmux_session)"
echo "========================================="
MONITOR_EOF

chmod +x <repo_directory>/.task_manager/monitor.sh

# å‘ŠçŸ¥ç”¨æˆ·å¦‚ä½•ç›‘æ§
echo "ğŸ“Š ä»»åŠ¡ç›‘æ§æ–¹å¼ï¼š"
echo "1. æŸ¥çœ‹çŠ¶æ€: bash <repo_directory>/.task_manager/monitor.sh"
echo "2. å®æ—¶æ—¥å¿—: tail -f <repo_directory>/.task_manager/logs/environment.log"
echo "3. è¿›å…¥ tmux: tmux attach -t \$SESSION_NAME"
```

### ç¬¬å››æ­¥ï¼šç­‰å¾…å¹¶è¡Œä»»åŠ¡å®Œæˆ

```bash
# ç­‰å¾…è„šæœ¬
cat > <repo_directory>/.task_manager/wait_for_tasks.sh << 'WAIT_EOF'
#!/bin/bash

TASK_DIR="<repo_directory>/.task_manager"
TIMEOUT=3600  # 1å°æ—¶è¶…æ—¶
ELAPSED=0

echo "ç­‰å¾…å¹¶è¡Œä»»åŠ¡å®Œæˆ..."

while [ $ELAPSED -lt $TIMEOUT ]; do
    # æ£€æŸ¥ç¯å¢ƒæ­å»º
    ENV_DONE=false
    if grep -q "ENVIRONMENT_SETUP_COMPLETE" "$TASK_DIR/status" 2>/dev/null; then
        ENV_DONE=true
    fi
    
    # æ£€æŸ¥æ¨¡å‹ä¸‹è½½
    MODEL_DONE=false
    if grep -q "MODEL_DOWNLOAD_COMPLETE" "$TASK_DIR/status" 2>/dev/null; then
        MODEL_DONE=true
    fi
    
    # å¦‚æœéƒ½å®Œæˆï¼Œé€€å‡º
    if [ "$ENV_DONE" = true ] && [ "$MODEL_DONE" = true ]; then
        echo "âœ… æ‰€æœ‰å¹¶è¡Œä»»åŠ¡å®Œæˆï¼"
        exit 0
    fi
    
    # æ˜¾ç¤ºè¿›åº¦
    echo -n "."
    sleep 5
    ELAPSED=$((ELAPSED + 5))
done

echo "âš ï¸ ç­‰å¾…è¶…æ—¶ï¼Œè¯·æ‰‹åŠ¨æ£€æŸ¥ä»»åŠ¡çŠ¶æ€"
exit 1
WAIT_EOF

chmod +x <repo_directory>/.task_manager/wait_for_tasks.sh

# æ‰§è¡Œç­‰å¾…ï¼ˆå¯åå°è¿è¡Œï¼‰
bash <repo_directory>/.task_manager/wait_for_tasks.sh
```

### ç¬¬äº”æ­¥ï¼šDemo æ•°æ®å‡†å¤‡

```bash
# åœ¨ä¸» window ä¸­æ‰§è¡Œ
tmux select-window -t $SESSION_NAME:0
tmux send-keys -t $SESSION_NAME "cd <repo_directory>" Enter

# æ£€æŸ¥ç¤ºä¾‹æ•°æ®
if [ -d "examples" ]; then
    echo "ä½¿ç”¨ examples/ ç›®å½•ä¸­çš„æ•°æ®"
    DATA_PATH="examples/"
elif [ -d "demo" ]; then
    echo "ä½¿ç”¨ demo/ ç›®å½•ä¸­çš„æ•°æ®"
    DATA_PATH="demo/"
elif [ -d "assets" ]; then
    echo "ä½¿ç”¨ assets/ ç›®å½•ä¸­çš„æ•°æ®"
    DATA_PATH="assets/"
else
    echo "æœªæ‰¾åˆ°ç¤ºä¾‹æ•°æ®ï¼Œè¯·ç”¨æˆ·æä¾›æµ‹è¯•æ•°æ®"
    # æ ¹æ®æ¨¡å‹ç±»å‹åˆ›å»ºç®€å•æµ‹è¯•æ•°æ®
fi
```

### ç¬¬å…­æ­¥ï¼šæ¨ç†æ‰§è¡Œ

```bash
# æŸ¥æ‰¾æ¨ç†è„šæœ¬
INFERENCE_SCRIPT=""
for script in inference.py demo.py run.py; do
    if [ -f "$script" ]; then
        INFERENCE_SCRIPT="$script"
        break
    fi
done

if [ -z "$INFERENCE_SCRIPT" ]; then
    echo "âŒ æœªæ‰¾åˆ°æ¨ç†è„šæœ¬ï¼Œè¯·ç”¨æˆ·æ‰‹åŠ¨è¿è¡Œ"
else
    echo "æ‰¾åˆ°æ¨ç†è„šæœ¬: $INFERENCE_SCRIPT"
    
    # åˆ›å»ºè¾“å‡ºç›®å½•
    mkdir -p .demo_output
    
    # åœ¨æ–°çš„ tmux window ä¸­è¿è¡Œæ¨ç†
    tmux new-window -t $SESSION_NAME -n "inference"
    tmux send-keys -t $SESSION_NAME:inference "cd <repo_directory>" Enter
    tmux send-keys -t $SESSION_NAME:inference "source .venv/bin/activate" Enter
    tmux send-keys -t $SESSION_NAME:inference "python $INFERENCE_SCRIPT --model <model_path> --input $DATA_PATH --output .demo_output/" Enter
    
    # è®°å½•å®Œæˆ
    tmux send-keys -t $SESSION_NAME:inference "echo 'INFERENCE_COMPLETE' >> .task_manager/status" Enter
fi
```

### ç¬¬ä¸ƒæ­¥ï¼šç»“æœéªŒè¯

```bash
# æ£€æŸ¥è¾“å‡ºç›®å½•
if [ -d ".demo_output" ] && [ "$(ls -A .demo_output)" ]; then
    echo "âœ… æ¨ç†å®Œæˆï¼è¾“å‡ºæ–‡ä»¶ä½äº: .demo_output/"
    echo "è¾“å‡ºæ–‡ä»¶åˆ—è¡¨:"
    ls -lh .demo_output/
else
    echo "âš ï¸ æœªæ£€æµ‹åˆ°è¾“å‡ºæ–‡ä»¶ï¼Œè¯·æ£€æŸ¥æ¨ç†æ—¥å¿—"
fi
```

## ğŸ›¡ï¸ å®‰å…¨é€€å‡ºæœºåˆ¶

### é€€å‡ºé’©å­è„šæœ¬

```bash
# åˆ›å»ºå®‰å…¨é€€å‡ºè„šæœ¬
cat > <repo_directory>/.task_manager/cleanup.sh << 'CLEANUP_EOF'
#!/bin/bash

TASK_DIR="<repo_directory>/.task_manager"
SESSION_NAME=$(cat "$TASK_DIR/tmux_session" 2>/dev/null)

echo "æ­£åœ¨å®‰å…¨åœæ­¢æ‰€æœ‰åå°ä»»åŠ¡..."

# 1. åœæ­¢æ‰€æœ‰è®°å½•çš„ PID
for pid_file in "$TASK_DIR/pids"/*.pid; do
    if [ -f "$pid_file" ]; then
        PID=$(cat "$pid_file")
        if kill -0 "$PID" 2>/dev/null; then
            echo "åœæ­¢è¿›ç¨‹ $PID..."
            kill -TERM "$PID"
            sleep 2
            # å¦‚æœè¿›ç¨‹è¿˜åœ¨è¿è¡Œï¼Œå¼ºåˆ¶æ€æ­»
            if kill -0 "$PID" 2>/dev/null; then
                kill -KILL "$PID"
            fi
        fi
    fi
done

# 2. å…³é—­ tmux session
if [ -n "$SESSION_NAME" ] && tmux has-session -t "$SESSION_NAME" 2>/dev/null; then
    echo "å…³é—­ tmux session: $SESSION_NAME"
    tmux kill-session -t "$SESSION_NAME"
fi

# 3. æ¸…ç†ä¸´æ—¶æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
# rm -rf "$TASK_DIR/pids"

echo "âœ… æ‰€æœ‰ä»»åŠ¡å·²å®‰å…¨åœæ­¢"
echo "æ—¥å¿—ä¿ç•™åœ¨: $TASK_DIR/logs/"
CLEANUP_EOF

chmod +x <repo_directory>/.task_manager/cleanup.sh

# è®¾ç½®é€€å‡ºé’©å­
trap "<repo_directory>/.task_manager/cleanup.sh" EXIT INT TERM
```

### æ³¨å†Œé€€å‡ºé’©å­

åœ¨è„šæœ¬å¼€å§‹æ—¶æ³¨å†Œï¼š

```bash
# åœ¨ä»»åŠ¡å¼€å§‹æ—¶è®¾ç½®
trap 'bash <repo_directory>/.task_manager/cleanup.sh' EXIT INT TERM

# è¿™æ ·å½“è„šæœ¬æ”¶åˆ° EXIT, INT (Ctrl+C), æˆ– TERM ä¿¡å·æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œæ¸…ç†
```

## ğŸ“Š ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢

### æŸ¥è¯¢è„šæœ¬

```bash
# åˆ›å»ºçŠ¶æ€æŸ¥è¯¢è„šæœ¬
cat > <repo_directory>/.task_manager/status.sh << 'STATUS_EOF'
#!/bin/bash

TASK_DIR="<repo_directory>/.task_manager"

echo "========================================="
echo "Repo Scout ä»»åŠ¡çŠ¶æ€"
echo "========================================="

# è¯»å–ä»»åŠ¡çŠ¶æ€
if [ -f "$TASK_DIR/tasks.json" ]; then
    # æ£€æŸ¥å„ä¸ªä»»åŠ¡çŠ¶æ€
    for task in environment model_download data_prep inference; do
        if grep -q "${task^^}_COMPLETE" "$TASK_DIR/status" 2>/dev/null; then
            STATUS="âœ… å®Œæˆ"
        elif [ -f "$TASK_DIR/pids/$task.pid" ]; then
            PID=$(cat "$TASK_DIR/pids/$task.pid")
            if kill -0 "$PID" 2>/dev/null; then
                STATUS="â³ è¿è¡Œä¸­ (PID: $PID)"
            else
                STATUS="âŒ å¤±è´¥æˆ–åœæ­¢"
            fi
        else
            STATUS="â¸ï¸ å¾…æ‰§è¡Œ"
        fi
        echo "$task: $STATUS"
    done
else
    echo "æœªæ‰¾åˆ°ä»»åŠ¡çŠ¶æ€æ–‡ä»¶"
fi

echo ""
echo "è¯¦ç»†æ—¥å¿—ä½äº: $TASK_DIR/logs/"
STATUS_EOF

chmod +x <repo_directory>/.task_manager/status.sh

# ä½¿ç”¨
bash <repo_directory>/.task_manager/status.sh
```

## ğŸ”„ tmux ä¼šè¯ç®¡ç†

### å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹æ‰€æœ‰ tmux ä¼šè¯
tmux ls

# è¿æ¥åˆ°æŒ‡å®šä¼šè¯
tmux attach -t <session_name>

# ä¸´æ—¶è„±ç¦»ä¼šè¯ï¼ˆä»»åŠ¡ç»§ç»­è¿è¡Œï¼‰
# æŒ‰é”®: Ctrl+B, ç„¶åæŒ‰ D

# æ€æ­»æŒ‡å®šä¼šè¯
tmux kill-session -t <session_name>

# åœ¨ä¼šè¯ä¸­åˆ‡æ¢çª—å£
# Ctrl+B, ç„¶åæŒ‰çª—å£ç¼–å· (0, 1, 2...)

# åœ¨ä¼šè¯ä¸­æŸ¥çœ‹æ‰€æœ‰çª—å£
# Ctrl+B, ç„¶åæŒ‰ W
```

## ğŸ“‹ å®Œæ•´å‘½ä»¤è®°å½•æ¨¡æ¿

```markdown
## è°ƒç ”å‘½ä»¤è®°å½•

### ä»»åŠ¡ç®¡ç†
```bash
# åˆå§‹åŒ–
SESSION_NAME="repo-scout-$(date +%Y%m%d_%H%M%S)"
tmux new-session -d -s $SESSION_NAME

# ç›‘æ§
bash <repo_directory>/.task_manager/monitor.sh

# çŠ¶æ€æŸ¥è¯¢
bash <repo_directory>/.task_manager/status.sh

# å®‰å…¨é€€å‡º
bash <repo_directory>/.task_manager/cleanup.sh
```

### å¹¶è¡Œä»»åŠ¡
```bash
# ç¯å¢ƒæ­å»ºï¼ˆwindow 0ï¼‰
tmux new-window -t $SESSION_NAME -n "environment"
tmux send-keys -t $SESSION_NAME:environment "uv venv .venv && source .venv/bin/activate" Enter
tmux send-keys -t $SESSION_NAME:environment "uv pip install -r requirements.txt" Enter

# æ¨¡å‹ä¸‹è½½ï¼ˆwindow 1ï¼‰
tmux new-window -t $SESSION_NAME -n "model_download"
tmux send-keys -t $SESSION_NAME:model_download "~/.local/bin/hfd.sh <model> --tool aria2c -x 10" Enter
```

### æ¨ç†æ‰§è¡Œ
```bash
# æ¨ç†ï¼ˆwindow 2ï¼‰
tmux new-window -t $SESSION_NAME -n "inference"
tmux send-keys -t $SESSION_NAME:inference "source .venv/bin/activate" Enter
tmux send-keys -t $SESSION_NAME:inference "python inference.py --model <model_path> --output .demo_output/" Enter
```
```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. å¹¶è¡Œæ‰§è¡Œçš„åˆ¤æ–­

**åº”è¯¥å¹¶è¡Œçš„åœºæ™¯**ï¼š
- âœ… ç¯å¢ƒæ­å»º + æ¨¡å‹ä¸‹è½½ï¼ˆä¸¤è€…ç‹¬ç«‹ï¼‰
- âœ… å¤šä¸ªæ¨¡å‹ä¸‹è½½
- âœ… æ•°æ®å‡†å¤‡ + æ¨¡å‹ä¸‹è½½ï¼ˆå¦‚æœæ•°æ®ä¸åœ¨æ¨¡å‹ä¸­ï¼‰

**ä¸åº”è¯¥å¹¶è¡Œçš„åœºæ™¯**ï¼š
- âŒ ç¯å¢ƒæ­å»º + ä¾èµ–è¯¥ç¯å¢ƒçš„ä»»åŠ¡
- âŒ æ¨¡å‹ä¸‹è½½ + ä½¿ç”¨è¯¥æ¨¡å‹çš„æ¨ç†

### 2. tmux ä½¿ç”¨å»ºè®®

- æ¯ä¸ªé•¿æ—¶é—´ä»»åŠ¡ä½¿ç”¨ç‹¬ç«‹çš„ window
- ä½¿ç”¨æœ‰æ„ä¹‰çš„ window åç§°
- å®šæœŸä¿å­˜æ—¥å¿—
- ä½¿ç”¨æ—¥å¿—æ–‡ä»¶è€Œéä»…ä¾èµ– tmux buffer

### 3. é”™è¯¯å¤„ç†

```bash
# æ£€æŸ¥å‘½ä»¤æ˜¯å¦æˆåŠŸ
tmux send-keys -t $SESSION_NAME:environment "uv pip install -r requirements.txt || echo 'INSTALL_FAILED' >> .task_manager/status" Enter

# åœ¨ç­‰å¾…è„šæœ¬ä¸­æ£€æŸ¥
if grep -q "INSTALL_FAILED" "$TASK_DIR/status"; then
    echo "âŒ ç¯å¢ƒæ­å»ºå¤±è´¥"
    # æä¾›é”™è¯¯æ—¥å¿—
    cat "$LOG_DIR/environment.log"
fi
```

## ğŸš¨ æ•…éšœæ’é™¤

| é—®é¢˜ | è¯Šæ–­ | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| tmux session ä¸å­˜åœ¨ | `tmux ls` | é‡æ–°åˆ›å»º session |
| ä»»åŠ¡å¡ä½ä¸åŠ¨ | æ£€æŸ¥æ—¥å¿—æ–‡ä»¶ | æŸ¥çœ‹ `.task_manager/logs/` |
| è¿›ç¨‹å¼‚å¸¸é€€å‡º | æ£€æŸ¥ PID æ–‡ä»¶ | é‡æ–°å¯åŠ¨ä»»åŠ¡ |
| æ— æ³•è¿æ¥ tmux | æƒé™æˆ–è·¯å¾„é—®é¢˜ | æ£€æŸ¥ tmux socket æƒé™ |
| å¹¶è¡Œä»»åŠ¡å†²çª | èµ„æºç«äº‰ | è°ƒæ•´å¹¶è¡Œç­–ç•¥ |

## ğŸ’¡ é«˜çº§ç”¨æ³•

### 1. è¿œç¨‹æ‰§è¡Œ

```bash
# åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
ssh user@server "tmux new-session -d -s repo-scout 'bash -c \"cd /path/to/repo && uv venv .venv && ...\"'"
```

### 2. å®šæ—¶ç›‘æ§

```bash
# æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡çŠ¶æ€
watch -n 60 'bash <repo_directory>/.task_manager/status.sh'
```

### 3. é‚®ä»¶é€šçŸ¥

```bash
# ä»»åŠ¡å®Œæˆæ—¶å‘é€é‚®ä»¶
echo "Task completed" | mail -s "Repo Scout Update" user@example.com
```

## ğŸ“ ç¤ºä¾‹å®Œæ•´æµç¨‹

```bash
# 1. åˆå§‹åŒ–
cd /workspace
git clone https://github.com/example/awesome-model.git
cd awesome-model

# 2. è®¾ç½®ä»»åŠ¡ç®¡ç†
SESSION_NAME="repo-scout-awesome"
tmux new-session -d -s $SESSION_NAME
mkdir -p .task_manager/{logs,pids}

# 3. å¹¶è¡Œæ‰§è¡Œç¯å¢ƒæ­å»ºå’Œæ¨¡å‹ä¸‹è½½
# Window 0: ç¯å¢ƒ
tmux send-keys -t $SESSION_NAME:0 "uv venv .venv && source .venv/bin/activate && uv pip install -r requirements.txt && echo 'ENV_DONE' >> .task_manager/status" Enter

# Window 1: æ¨¡å‹
tmux new-window -t $SESSION_NAME -n "model"
tmux send-keys -t $SESSION_NAME:1 "~/.local/bin/hfd.sh org/model --tool aria2c -x 10 && echo 'MODEL_DONE' >> .task_manager/status" Enter

# 4. ç›‘æ§
watch -n 10 'cat .task_manager/status 2>/dev/null || echo "No status yet"'

# 5. ç­‰å¾…å®Œæˆï¼ˆåœ¨å¦ä¸€ä¸ªç»ˆç«¯ï¼‰
while ! grep -q "ENV_DONE" .task_manager/status && ! grep -q "MODEL_DONE" .task_manager/status; do
    sleep 5
done

# 6. è¿è¡Œæ¨ç†
tmux new-window -t $SESSION_NAME -n "inference"
tmux send-keys -t $SESSION_NAME:inference "source .venv/bin/activate && python inference.py --model ./model --output .demo_output/" Enter

# 7. æ£€æŸ¥ç»“æœ
ls -lh .demo_output/

# 8. æ¸…ç†ï¼ˆå¯é€‰ï¼‰
tmux kill-session -t $SESSION_NAME
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **tmux ä¾èµ–**ï¼šç¡®ä¿ç³»ç»Ÿå·²å®‰è£… tmux
2. **æƒé™ç®¡ç†**ï¼šç¡®ä¿ PID æ–‡ä»¶å¯è¯»å†™
3. **ç£ç›˜ç©ºé—´**ï¼šç›‘æ§æ—¥å¿—æ–‡ä»¶å¤§å°
4. **ç½‘ç»œç¨³å®šæ€§**ï¼šé•¿æ—¶é—´ä¸‹è½½å»ºè®®ä½¿ç”¨æ”¯æŒæ–­ç‚¹ç»­ä¼ çš„å·¥å…·
5. **èµ„æºç«äº‰**ï¼šé¿å…è¿‡å¤šçš„å¹¶è¡Œä»»åŠ¡æ¶ˆè€—ç³»ç»Ÿèµ„æº

## ğŸ‰ æ€»ç»“

é€šè¿‡å¼•å…¥ tmux å’Œå¹¶è¡Œæ‰§è¡Œæœºåˆ¶ï¼ŒRepo Scout ç°åœ¨å¯ä»¥ï¼š
- âš¡ æ›´å¿«å®Œæˆä»»åŠ¡ï¼ˆå¹¶è¡Œæ‰§è¡Œï¼‰
- ğŸ›¡ï¸ æ›´ç¨³å®šï¼ˆåå°è¿è¡Œï¼Œä¸æ€•ä¸­æ–­ï¼‰
- ğŸ“Š æ›´é€æ˜ï¼ˆå®æ—¶ç›‘æ§å’Œæ—¥å¿—ï¼‰
- ğŸ”§ æ›´çµæ´»ï¼ˆéšæ—¶å¯ä»¥æ£€æŸ¥å’Œç®¡ç†ï¼‰

---

**è®© AI æ¨¡å‹è°ƒç ”æ›´å¿«ã€æ›´ç¨³å®šã€æ›´å¯æ§ï¼**
